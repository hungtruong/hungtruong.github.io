<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="referrer" content="origin">

    <title>How Ghost Inspector Helped Me Furnish My House</title>

    <!-- Open Graph Meta -->
    <meta content="Hung Truong: The Blog!" property="og:site_name">
    
      <meta content="How Ghost Inspector Helped Me Furnish My House" property="og:title">
    
    
      <meta content="article" property="og:type">
    
    
      <meta content="I say potato, you say potato..." property="og:description">
    
    
      <meta content="https://www.hung-truong.com/blog/2015/01/20/how-ghost-inspector-helped-me-furnish-my-house/" property="og:url">
    
    
      <meta content="2015-01-20T06:43:15-08:00" property="article:published_time">
      <meta content="https://www.hung-truong.com/blog/about/" property="article:author">
    
    
      <meta content="https://www.hung-truong.com/blog/assets/img/danbo.jpg" property="og:image">
    

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@hungtruong">
    <meta name="twitter:creator" content="@hungtruong">
    
      <meta name="twitter:title" content="How Ghost Inspector Helped Me Furnish My House">
    
    
      <meta name="twitter:url" content="https://www.hung-truong.com/blog/2015/01/20/how-ghost-inspector-helped-me-furnish-my-house/">
    
    
      <meta name="twitter:description" content="I say potato, you say potato...">
    
    
      <meta name="twitter:image:src" content="https://www.hung-truong.com/blog/assets/img/danbo.jpg">
    


    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/blog/assets/img/favicon.ico" />

    <!-- Come and get me RSS readers -->
    <link rel="alternate" type="application/rss+xml" title="Hung Truong: The Blog!" href="https://www.hung-truong.com/blog/feed.xml" />

    <!-- Stylesheet -->
    <link rel="stylesheet" href="/blog/assets/css/style.css">
    <!--[if IE 8]><link rel="stylesheet" href="/blog/assets/css/ie.css"><![endif]-->
    <link rel="canonical" href="https://www.hung-truong.com/blog/2015/01/20/how-ghost-inspector-helped-me-furnish-my-house/">

    <!-- Modernizr -->
    <script src="/blog/assets/js/modernizr.custom.15390.js" type="text/javascript"></script>

     <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-248124-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-248124-2');
</script>
 
</head>


<body>

    <div class="header">
     <div class="container">
         <h1 class="logo"><a href="/blog/">Hung Truong: The Blog!</a></h1>
         <nav class="nav-collapse">
             <ul class="noList">
                 
                 <li class="element first  ">
                     <a href="/blog/index.html">Home</a>
                 </li>
                 
                 <li class="element   ">
                     <a href="/blog/archives">Archives</a>
                 </li>
                 
                 <li class="element   ">
                     <a href="/blog/about">About</a>
                 </li>
                 
                 <li class="element   ">
                     <a href="/blog/contact">Contact</a>
                 </li>
                 
                 <li class="element   last">
                     <a href="/blog/speaking">Speaking</a>
                 </li>
                 
             </ul>
         </nav>
     </div>
 </div><!-- end .header -->


   <div class="content">
      <div class="container">
         <div class="post">
  <h1 class="postTitle">How Ghost Inspector Helped Me Furnish My House</h1>
  <p class="meta">January 20, 2015 | <span class="time">6</span> Minute Read</p>
  
  <h2 id="act-1">Act 1</h2>

<p>Ikea Stockholm. The average college student would scoff at such luxury, but as a first-time homebuyer, I wanted the best. When I saw the Ikea Stockholm TV Unit (in walnut veneer), I knew I would have it. The problem was that it never seemed to be in stock.</p>
<figure>
  <a href="/blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg" rel="lightbox[2911]"><img class="size-medium wp-image-2912" src="/blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?resize=500%2C500" alt="Behold the majesty." width="500" height="500" srcset="/blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?resize=500%2C500 500w, /blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?resize=150%2C150 150w, /blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?resize=1024%2C1024 1024w, /blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?w=1208 1208w, /blog/wp-content/uploads/2015/01/0178733_PE331593_S5.jpg?w=1812 1812w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a>
  <figcaption>Behold the majesty.</figcaption>
</figure>
<!--more-->
<p>I must have waited for months, maybe even a year, to see if the unit was available in my Ikea store, but apparently there were production issues. The Ikea phone support was never useful and just told me to check again later. I was stuck waiting it out while my current Ikea (non-Stockholm) tv stand bowed under the weight of my 60″ television.</p>

<p>On a random visit in December, though, my interest was piqued. The “buy” button was actually there on the page! I tried faking an order and got a preliminary ship date! For whatever stupid reason, I thought this meant that the supply issues had been fixed. I delayed. I wanted to make sure the thing would fit in my living room. I missed out. Later that week, when I checked the site, the unit was gone.</p>

<h2 id="act-2">Act 2</h2>

<p>I noticed that the website did something weird when I tried buying the tv unit. The “buy” button was still working. The item was added to my cart. But when I tried to enter my address, I would get an error in my cart saying the unit wasn’t available. There must’ve been some issue with their inventory system.</p>

<p>Instead of checking manually every day to see if Ikea had any real stock, I decided to automate the process using a tool called Ghost Inspector.</p>

<p>Ghost Inspector is a service that lets you define actions for a headless (ghostly) web browser to run for you. It’s mostly intended for running tests on parts of your website (like verifying that a user can log in, get some data, not get an error, etc). If you end up changing a part of your website and it breaks another, Ghost Inspector can automate the process of discovering that regression.</p>

<p>As the title of my blog post implies, Ghost Inspector can also tell you when that piece of furniture you want goes back in stock.</p>

<p>To get started, I created a free account on <a href="https://ghostinspector.com/">ghostinspector.com</a>. The free tier allows you to run 100 automated tests per month. This was more than enough for me to check Ikea once every day. To create a “test,” you can either download a Chrome extension that assists you in recording a test, or enter steps into the site itself using actions and CSS selectors (you can also use the extension to record a rough version of a test and edit it later, as I did).</p>

<p>This is what my first test run looked like after I recorded the process of adding the item to the cart, entering my address info and trying to check out:</p>

<p><a href="/blog/wp-content/uploads/2015/01/testfail.png" rel="lightbox[2911]"><img class="aligncenter size-medium wp-image-2916" src="/blog/wp-content/uploads/2015/01/testfail.png?resize=500%2C310" alt="" width="500" height="310" srcset="/blog/wp-content/uploads/2015/01/testfail.png?resize=500%2C310 500w, /blog/wp-content/uploads/2015/01/testfail.png?resize=1024%2C634 1024w, /blog/wp-content/uploads/2015/01/testfail.png?w=1596 1596w, /blog/wp-content/uploads/2015/01/testfail.png?w=1208 1208w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a>As you can see, the test failed, which is bad, because I was testing to see if the item was out of stock (which I knew was true). The Ghost Inspector recorder picked up that I clicked on a button with a “pressed” state active. Unfortunately, the headless browser doesn’t hover over a button when clicking it, so it didn’t actually see this element and couldn’t click it. I fixed this by selecting the ‘a’ tag with the specific id that I knew would actually add the item to my cart (I also made the browser pause in case something needed to finish loading before hitting the button):</p>

<p><a href="/blog/wp-content/uploads/2015/01/success.png" rel="lightbox[2911]"><img class="aligncenter size-medium wp-image-2917" src="/blog/wp-content/uploads/2015/01/success.png?resize=500%2C263" alt="" width="500" height="263" srcset="/blog/wp-content/uploads/2015/01/success.png?resize=500%2C263 500w, /blog/wp-content/uploads/2015/01/success.png?resize=1024%2C539 1024w, /blog/wp-content/uploads/2015/01/success.png?w=1566 1566w, /blog/wp-content/uploads/2015/01/success.png?w=1208 1208w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a>Here’s the screenshot of my successful (empty cart) test:</p>

<p><a href="/blog/wp-content/uploads/2015/01/ikeaempty.png" rel="lightbox[2911]"><img class="aligncenter size-medium wp-image-2918" src="/blog/wp-content/uploads/2015/01/ikeaempty.png?resize=500%2C470" alt="" width="500" height="470" srcset="/blog/wp-content/uploads/2015/01/ikeaempty.png?resize=500%2C470 500w, /blog/wp-content/uploads/2015/01/ikeaempty.png?resize=1024%2C963 1024w, /blog/wp-content/uploads/2015/01/ikeaempty.png?w=1280 1280w, /blog/wp-content/uploads/2015/01/ikeaempty.png?w=1208 1208w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a></p>

<p>At the end of the test, I created an assertion that an element with class “#cartTableError” exists, which shouldn’t happen if your cart is full of Stockholm awesomeness and ready to be shipped. With the test running automatically every day, all that was left for me to do was wait until Ghost Inspector emailed me to notify me of the test “failure,” which meant the item was in stock.</p>

<h2 id="act-3">Act 3</h2>

<p>The fateful day. I got an email from Ghost Inspector that my test failed. I hurriedly typed “ikea.com” into my browser. The product page slowly revealed itself and I girded my loins for the moment I could click “buy.” But the buy button wasn’t there! The test failed because the website now correctly showed that the item was not for sale. Boo!<figure id="attachment_2926" style="max-width: 500px" class="wp-caption aligncenter"></figure></p>

<p><a href="/blog/wp-content/uploads/2015/01/Screen-Shot-2015-01-20-at-2.39.55-PM.png" rel="lightbox[2911]"><img class="size-medium wp-image-2926" src="/blog/wp-content/uploads/2015/01/Screen-Shot-2015-01-20-at-2.39.55-PM.png?resize=500%2C261" alt="Test failed, but not the way I wanted" width="500" height="261" srcset="/blog/wp-content/uploads/2015/01/Screen-Shot-2015-01-20-at-2.39.55-PM.png?resize=500%2C261 500w, /blog/wp-content/uploads/2015/01/Screen-Shot-2015-01-20-at-2.39.55-PM.png?w=792 792w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a>&lt;figcaption class="wp-caption-text"&gt;Test failed, but not the way I wanted&lt;/figcaption&gt;&lt;/figure&gt;</p>

<p>I had to write another test. But unfortunately, I couldn’t assert the non-existence of an object. Instead, I faked clicking the buy button (which apparently worked fine) and then tested whether the cart was empty when I clicked to it. The test looked like this:</p>

<p><a href="/blog/wp-content/uploads/2015/01/emptcart.png" rel="lightbox[2911]"><img class="aligncenter size-medium wp-image-2921" src="/blog/wp-content/uploads/2015/01/emptcart.png?resize=500%2C173" alt="" width="500" height="173" srcset="/blog/wp-content/uploads/2015/01/emptcart.png?resize=500%2C173 500w, /blog/wp-content/uploads/2015/01/emptcart.png?resize=1024%2C353 1024w, /blog/wp-content/uploads/2015/01/emptcart.png?w=1576 1576w, /blog/wp-content/uploads/2015/01/emptcart.png?w=1208 1208w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a></p>

<p>Apparently this is a stupid test because it is actually still passing. But Ghost Inspector has a feature where it takes a screenshot after every passed test and compares it to the next test. In this case, the screenshot diff test failed and I was notified  a few days ago. And it turns out that the tv stand is actually in stock!<figure id="attachment_2922" style="max-width: 500px" class="wp-caption aligncenter"></figure></p>

<p><a href="/blog/wp-content/uploads/2015/01/screenshotdiff.png" rel="lightbox[2911]"><img class="size-medium wp-image-2922" src="/blog/wp-content/uploads/2015/01/screenshotdiff.png?resize=500%2C262" alt="A comparison of screenshots." width="500" height="262" srcset="/blog/wp-content/uploads/2015/01/screenshotdiff.png?resize=500%2C262 500w, /blog/wp-content/uploads/2015/01/screenshotdiff.png?resize=1024%2C537 1024w, /blog/wp-content/uploads/2015/01/screenshotdiff.png?w=1208 1208w" sizes="(max-width: 500px) 100vw, 500px" data-recalc-dims="1" /></a>&lt;figcaption class="wp-caption-text"&gt;A comparison of screenshots.&lt;/figcaption&gt;&lt;/figure&gt;</p>

<h2 id="epilogue">Epilogue</h2>

<p>I’ve ordered the tv stand and it should be on its way by the end of the month. Many thanks to Ghost Inspector for creating a free tier for this service so that furniture aficionados like me can automate their obsessive compulsive shopping. But in future versions, please support:</p>

<ol>
  <li>More specific selection of css selectors when using the Chrome recording tool</li>
  <li>Negative assertions that check when an element doesn’t exist. (I can probably do this by evaluating Javascript but tests take so long to run that it’s hard to debug)</li>
</ol>

<p>If you’re interested in creating automated tests for your website (or in getting notifications for furniture availability), definitely give <a href="https://ghostinspector.com/">Ghost Inspector</a> a shot.</p>


  <!-- POST NAVIGATION -->
  <div class="postNav clearfix">
     
      <a class="prev" href="/blog/2014/10/10/graphing-my-cycling-progress-on-strava-and-automating-with-zapier/"><span>&laquo;&nbsp;Graphing My Cycling Progress on Strava and Automating With Zapier</span>
      
    </a>
      
      
      <a class="next" href="/blog/2015/03/10/side-project-audubon/"><span>Side Project: Audubon&nbsp;&raquo;</span>
       
      </a>
     
  </div>
</div>

      </div>
   </div><!-- end .content -->

   <div class="footer">
   <div class="container">
      <p class="copy">&copy; 2022 <a href="http://www.hung-truong.com/blog/">Hung Truong</a></p>

      <div class="footer-links">
         <ul class="noList">
            
            
            <li><a href="https://twitter.com/hungtruong">
                  <svg id="twitter" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M99.001,19.428c-3.606,1.608-7.48,2.695-11.547,3.184c4.15-2.503,7.338-6.466,8.841-11.189 c-3.885,2.318-8.187,4-12.768,4.908c-3.667-3.931-8.893-6.387-14.676-6.387c-11.104,0-20.107,9.054-20.107,20.223 c0,1.585,0.177,3.128,0.52,4.609c-16.71-0.845-31.525-8.895-41.442-21.131C6.092,16.633,5.1,20.107,5.1,23.813 c0,7.017,3.55,13.208,8.945,16.834c-3.296-0.104-6.397-1.014-9.106-2.529c-0.002,0.085-0.002,0.17-0.002,0.255 c0,9.799,6.931,17.972,16.129,19.831c-1.688,0.463-3.463,0.71-5.297,0.71c-1.296,0-2.555-0.127-3.783-0.363 c2.559,8.034,9.984,13.882,18.782,14.045c-6.881,5.424-15.551,8.657-24.971,8.657c-1.623,0-3.223-0.096-4.796-0.282 c8.898,5.738,19.467,9.087,30.82,9.087c36.982,0,57.206-30.817,57.206-57.543c0-0.877-0.02-1.748-0.059-2.617 C92.896,27.045,96.305,23.482,99.001,19.428z"></path>
                  </svg>
            </a></li>
            
            
            <li><a href="https://github.com/hungtruong">
                  <svg id="github" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M50,1C22.938,1,1,22.938,1,50s21.938,49,49,49s49-21.938,49-49S77.062,1,50,1z M79.099,79.099 c-3.782,3.782-8.184,6.75-13.083,8.823c-1.245,0.526-2.509,0.989-3.79,1.387v-7.344c0-3.86-1.324-6.699-3.972-8.517 c1.659-0.16,3.182-0.383,4.57-0.67c1.388-0.287,2.855-0.702,4.402-1.245c1.547-0.543,2.935-1.189,4.163-1.938 c1.228-0.75,2.409-1.723,3.541-2.919s2.082-2.552,2.847-4.067s1.372-3.334,1.818-5.455c0.446-2.121,0.67-4.458,0.67-7.01 c0-4.945-1.611-9.155-4.833-12.633c1.467-3.828,1.308-7.991-0.478-12.489l-1.197-0.143c-0.829-0.096-2.321,0.255-4.474,1.053 c-2.153,0.798-4.57,2.105-7.249,3.924c-3.797-1.053-7.736-1.579-11.82-1.579c-4.115,0-8.039,0.526-11.772,1.579 c-1.69-1.149-3.294-2.097-4.809-2.847c-1.515-0.75-2.727-1.26-3.637-1.532c-0.909-0.271-1.754-0.439-2.536-0.503 c-0.782-0.064-1.284-0.079-1.507-0.048c-0.223,0.031-0.383,0.064-0.478,0.096c-1.787,4.53-1.946,8.694-0.478,12.489 c-3.222,3.477-4.833,7.688-4.833,12.633c0,2.552,0.223,4.889,0.67,7.01c0.447,2.121,1.053,3.94,1.818,5.455 c0.765,1.515,1.715,2.871,2.847,4.067s2.313,2.169,3.541,2.919c1.228,0.751,2.616,1.396,4.163,1.938 c1.547,0.543,3.014,0.957,4.402,1.245c1.388,0.287,2.911,0.511,4.57,0.67c-2.616,1.787-3.924,4.626-3.924,8.517v7.487 c-1.445-0.43-2.869-0.938-4.268-1.53c-4.899-2.073-9.301-5.041-13.083-8.823c-3.782-3.782-6.75-8.184-8.823-13.083 C9.934,60.948,8.847,55.56,8.847,50s1.087-10.948,3.231-16.016c2.073-4.899,5.041-9.301,8.823-13.083s8.184-6.75,13.083-8.823 C39.052,9.934,44.44,8.847,50,8.847s10.948,1.087,16.016,3.231c4.9,2.073,9.301,5.041,13.083,8.823 c3.782,3.782,6.75,8.184,8.823,13.083c2.143,5.069,3.23,10.457,3.23,16.016s-1.087,10.948-3.231,16.016 C85.848,70.915,82.88,75.317,79.099,79.099L79.099,79.099z"></path>
                  </svg>
            </a></li>
            
            
            <li><a href="mailto:hung@hung-truong.com">
                  <svg id="mail" class="custom-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" style="height: 30px; width: 30px;"><circle class="outer-shape" cx="50" cy="50" r="48" style="opacity: 1;"></circle>
                  <path class="inner-shape" style="opacity: 1;" transform="translate(25,25) scale(0.5)" d="M50,1C22.938,1,1,22.938,1,50s21.938,49,49,49s49-21.938,49-49S77.062,1,50,1z M25.5,25.5h49 c0.874,0,1.723,0.188,2.502,0.542L50,57.544L22.998,26.041C23.777,25.687,24.626,25.499,25.5,25.5L25.5,25.5z M19.375,68.375v-36.75 c0-0.128,0.005-0.256,0.014-0.383l17.96,20.953L19.587,69.958C19.448,69.447,19.376,68.916,19.375,68.375L19.375,68.375z M74.5,74.5 h-49c-0.541,0-1.072-0.073-1.583-0.212l17.429-17.429L50,66.956l8.653-10.096l17.429,17.429C75.572,74.427,75.041,74.5,74.5,74.5 L74.5,74.5z M80.625,68.375c0,0.541-0.073,1.072-0.211,1.583L62.652,52.195l17.96-20.953c0.008,0.127,0.014,0.255,0.014,0.383 L80.625,68.375L80.625,68.375z"></path>
                  </svg>
            </a></li>
            
         </ul>
      </div>
   </div>
   <!-- Default Statcounter code for Hung Truong: The Blog!
   http://www.hung-truong.com/blog/ -->
   <script type="text/javascript">
   var sc_project=1262196; 
   var sc_invisible=1; 
   var sc_security="4af14454"; 
   var scJsHost = (("https:" == document.location.protocol) ?
   "https://secure." : "http://www.");
   document.write("<sc"+"ript type='text/javascript' src='" +
   scJsHost+
   "statcounter.com/counter/counter.js'></"+"script>");
   </script>
   <!-- End of Statcounter Code -->
</div><!-- end .footer -->

   <!-- Add jQuery and other scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/blog/assets/js/dropcap.min.js"></script>
<script src="/blog/assets/js/responsive-nav.min.js"></script>
<script src="/blog/assets/js/scripts.js"></script>


</body>

</html>
